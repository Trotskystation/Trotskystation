<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;obj&#x2F;machinery&#x2F;vending - Yogstation 13</title>
</head>
<body>
<header>
    <a href="index.html">Yogstation 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="obj/machinery/vending.html#var">Var Details</a> - <a href="obj/machinery/vending.html#proc">Proc Details</a></header>
<main>
<h1>vending machines <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/vending.html">vending</a></aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L43">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 43"/></a></h1>

<p>Captalism in the year 2525, everything in a vending machine, even love</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/active">active</a></th><td>Is the machine active (No sales pitches if off)!</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/age_restrictions">age_restrictions</a></th><td>Whether our age check is currently functional</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/alertradio">alertradio</a></th><td>used for narcing on underages</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/bill">bill</a></th><td>Bills we accept?</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/canload_access_list">canload_access_list</a></th><td>ID's that can load this vending machine wtih refills</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/coin">coin</a></th><td>Coins that we accept?</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/contraband">contraband</a></th><td>List of products this machine sells when you hack it</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/default_price">default_price</a></th><td>Default price of items if not overridden</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/extended_inventory">extended_inventory</a></th><td>can we access the hidden inventory?</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/extra_price">extra_price</a></th><td>Default price of premium items if not overridden</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/icon_deny">icon_deny</a></th><td>Icon to flash when user is denied a vend</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/icon_vend">icon_vend</a></th><td>Icon when vending an item to the user</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/input_display_header">input_display_header</a></th><td>Display header on the input view</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/last_reply">last_reply</a></th><td>Last world tick we sent a vent reply</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/last_shopper">last_shopper</a></th><td>Last mob to shop with us</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/last_slogan">last_slogan</a></th><td>Last world tick we sent a slogan message out</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/onstation">onstation</a></th><td>Is this item on station or not</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/premium">premium</a></th><td>List of premium products this machine sells</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/product_ads">product_ads</a></th><td>String of small ad messages in the vending screen - random chance</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/product_slogans">product_slogans</a></th><td>String of slogans separated by semicolons, optional</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/products">products</a></th><td>List of products this machine sells</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/purchase_message_cooldown">purchase_message_cooldown</a></th><td>Next world time to send a purchase message</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/scan_id">scan_id</a></th><td>Are we checking the users ID</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/seconds_electrified">seconds_electrified</a></th><td>World ticks the machine is electified for</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/shoot_inventory">shoot_inventory</a></th><td>When this is TRUE, we fire items at customers! We're broken!</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/shoot_inventory_chance">shoot_inventory_chance</a></th><td>How likely this is to happen (prob 100)</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/slogan_delay">slogan_delay</a></th><td>How many ticks until we can send another</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/small_ads">small_ads</a></th><td>Small ad messages in the vending screen - random chance of popping up whenever you open it</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/vend_ready">vend_ready</a></th><td>Are we ready to vend?? Is it time??</td></tr>
            <tr><th><a href="obj/machinery/vending.html#var/vend_reply">vend_reply</a></th><td>Message sent post vend (Thank you for shopping!)</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/Initialize">Initialize</a></th><td>Initialize the vending machine</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/build_inventory">build_inventory</a></th><td>Build the inventory of the vending machine from it's product and record lists</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/canLoadItem">canLoadItem</a></th><td>Are we able to load the item passed in</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/compartmentLoadAccessCheck">compartmentLoadAccessCheck</a></th><td>Is the passed in user allowed to load this vending machines compartments</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/pre_throw">pre_throw</a></th><td>A callback called before an item is tossed out</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/refill_inventory">refill_inventory</a></th><td>Refill our inventory from the passed in product list into the record list</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/restock">restock</a></th><td>Refill a vending machine from a refill canister</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/shock">shock</a></th><td>Shock the passed in user</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/speak">speak</a></th><td>Speak the given message verbally</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/throw_item">throw_item</a></th><td>Throw an item from our internal inventory out in front of us</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/unbuild_inventory">unbuild_inventory</a></th><td>Given a record list, go through and and return a list of type -&gt; amount</td></tr>
            <tr><th><a href="obj/machinery/vending.html#proc/update_canister">update_canister</a></th><td>Set up a refill canister that matches this machines products</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/active"><aside class="declaration">var </aside>active
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L59">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 59"/></a></h3>
        <p>Is the machine active (No sales pitches if off)!</p><h3 id="var/age_restrictions"><aside class="declaration">var </aside>age_restrictions
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L134">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 134"/></a></h3>
        <p>Whether our age check is currently functional</p><h3 id="var/alertradio"><aside class="declaration">var </aside>alertradio
            <aside>&ndash; /<a href="obj.html">obj</a>/item/radio</aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L154">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 154"/></a></h3>
        <p>used for narcing on underages</p><h3 id="var/bill"><aside class="declaration">var </aside>bill
            <aside>&ndash; /<a href="obj.html">obj</a>/item/stack/spacecash</aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L127">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 127"/></a></h3>
        <p>Bills we accept?</p><h3 id="var/canload_access_list"><aside class="declaration">var </aside>canload_access_list
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L142">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 142"/></a></h3>
        <p>ID's that can load this vending machine wtih refills</p><h3 id="var/coin"><aside class="declaration">var </aside>coin
            <aside>&ndash; /<a href="obj.html">obj</a>/item/coin</aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L125">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 125"/></a></h3>
        <p>Coins that we accept?</p><h3 id="var/contraband"><aside class="declaration">var </aside>contraband
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L80">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 80"/></a></h3>
        <p>List of products this machine sells when you hack it</p>
<pre><code>form should be list(/type/path = amount, /type/path2 = amount2)
</code></pre><h3 id="var/default_price"><aside class="declaration">var </aside>default_price
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L130">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 130"/></a></h3>
        <p>Default price of items if not overridden</p><h3 id="var/extended_inventory"><aside class="declaration">var </aside>extended_inventory
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L121">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 121"/></a></h3>
        <p>can we access the hidden inventory?</p><h3 id="var/extra_price"><aside class="declaration">var </aside>extra_price
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L132">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 132"/></a></h3>
        <p>Default price of premium items if not overridden</p><h3 id="var/icon_deny"><aside class="declaration">var </aside>icon_deny
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L111">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 111"/></a></h3>
        <p>Icon to flash when user is denied a vend</p><h3 id="var/icon_vend"><aside class="declaration">var </aside>icon_vend
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L109">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 109"/></a></h3>
        <p>Icon when vending an item to the user</p><h3 id="var/input_display_header"><aside class="declaration">var </aside>input_display_header
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L146">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 146"/></a></h3>
        <p>Display header on the input view</p><h3 id="var/last_reply"><aside class="declaration">var </aside>last_reply
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L103">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 103"/></a></h3>
        <p>Last world tick we sent a vent reply</p><h3 id="var/last_shopper"><aside class="declaration">var </aside>last_shopper
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L65">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 65"/></a></h3>
        <p>Last mob to shop with us</p><h3 id="var/last_slogan"><aside class="declaration">var </aside>last_slogan
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L105">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 105"/></a></h3>
        <p>Last world tick we sent a slogan message out</p><h3 id="var/onstation"><aside class="declaration">var </aside>onstation
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L140">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 140"/></a></h3>
        <p>Is this item on station or not</p>
<p>if it doesn't originate from off-station during mapload, everything is free</p><h3 id="var/premium"><aside class="declaration">var </aside>premium
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L87">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 87"/></a></h3>
        <p>List of premium products this machine sells</p>
<pre><code>form should be list(/type/path, /type/path2) as there is only ever one in stock
</code></pre><h3 id="var/product_ads"><aside class="declaration">var </aside>product_ads
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L92">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 92"/></a></h3>
        <p>String of small ad messages in the vending screen - random chance</p><h3 id="var/product_slogans"><aside class="declaration">var </aside>product_slogans
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L90">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 90"/></a></h3>
        <p>String of slogans separated by semicolons, optional</p><h3 id="var/products"><aside class="declaration">var </aside>products
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L73">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 73"/></a></h3>
        <p>List of products this machine sells</p>
<pre><code>form should be list(/type/path = amount, /type/path2 = amount2)
</code></pre><h3 id="var/purchase_message_cooldown"><aside class="declaration">var </aside>purchase_message_cooldown
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L63">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 63"/></a></h3>
        <p>Next world time to send a purchase message</p><h3 id="var/scan_id"><aside class="declaration">var </aside>scan_id
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L123">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 123"/></a></h3>
        <p>Are we checking the users ID</p><h3 id="var/seconds_electrified"><aside class="declaration">var </aside>seconds_electrified
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L113">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 113"/></a></h3>
        <p>World ticks the machine is electified for</p><h3 id="var/shoot_inventory"><aside class="declaration">var </aside>shoot_inventory
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L115">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 115"/></a></h3>
        <p>When this is TRUE, we fire items at customers! We're broken!</p><h3 id="var/shoot_inventory_chance"><aside class="declaration">var </aside>shoot_inventory_chance
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L117">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 117"/></a></h3>
        <p>How likely this is to happen (prob 100)</p><h3 id="var/slogan_delay"><aside class="declaration">var </aside>slogan_delay
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L107">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 107"/></a></h3>
        <p>How many ticks until we can send another</p><h3 id="var/small_ads"><aside class="declaration">var </aside>small_ads
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L99">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 99"/></a></h3>
        <p>Small ad messages in the vending screen - random chance of popping up whenever you open it</p><h3 id="var/vend_ready"><aside class="declaration">var </aside>vend_ready
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L61">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 61"/></a></h3>
        <p>Are we ready to vend?? Is it time??</p><h3 id="var/vend_reply"><aside class="declaration">var </aside>vend_reply
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L101">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 101"/></a></h3>
        <p>Message sent post vend (Thank you for shopping!)</p><h2 id="proc">Proc Details</h2><h3 id="proc/Initialize"><aside class="parent"><a title="/atom" href="atom.html#proc/Initialize">&uarr;</a></aside>Initialize<aside>(mapload) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L167">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 167"/></a></aside>
        </h3>
        <p>Initialize the vending machine</p>
<p>Builds the vending machine inventory, sets up slogans and other such misc work</p>
<p>This also sets the onstation var to:</p>
<ul>
<li>FALSE - if the machine was maploaded on a zlevel that doesn't pass the is_station_level check</li>
<li>TRUE - all other cases</li>
</ul><h3 id="proc/build_inventory"><aside class="declaration">proc </aside>build_inventory<aside>(/list/productlist, /list/recordlist, start_empty) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L277">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 277"/></a></aside>
        </h3>
        <p>Build the inventory of the vending machine from it's product and record lists</p>
<p>This builds up a full set of /datum/data/vending_products from the product list of the vending machine type
Arguments:</p>
<ul>
<li>productlist - the list of products that need to be converted</li>
<li>recordlist - the list containing /datum/data/vending_product datums</li>
<li>startempty - should we set vending_product record amount from the product list (so it's prefilled at roundstart)</li>
</ul><h3 id="proc/canLoadItem"><aside class="declaration">proc </aside>canLoadItem<aside>(/<a href="obj.html">obj</a>/item/I, /<a href="mob.html">mob</a>/user) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L758">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 758"/></a></aside>
        </h3>
        <p>Are we able to load the item passed in</p>
<p>Arguments:</p>
<ul>
<li>I - the item being loaded</li>
<li>user - the user doing the loading</li>
</ul><h3 id="proc/compartmentLoadAccessCheck"><aside class="declaration">proc </aside>compartmentLoadAccessCheck<aside>(/<a href="mob.html">mob</a>/user) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L766">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 766"/></a></aside>
        </h3>
        <p>Is the passed in user allowed to load this vending machines compartments</p>
<p>Arguments:</p>
<ul>
<li>user - mob that is doing the loading of the vending machine</li>
</ul><h3 id="proc/pre_throw"><aside class="declaration">proc </aside>pre_throw<aside>(/<a href="obj.html">obj</a>/item/I) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L728">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 728"/></a></aside>
        </h3>
        <p>A callback called before an item is tossed out</p>
<p>Override this if you need to do any special case handling</p>
<p>Arguments:</p>
<ul>
<li>I - obj/item being thrown</li>
</ul><h3 id="proc/refill_inventory"><aside class="declaration">proc </aside>refill_inventory<aside>(/list/productlist, /list/recordlist) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L321">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 321"/></a></aside>
        </h3>
        <p>Refill our inventory from the passed in product list into the record list</p>
<p>Arguments:</p>
<ul>
<li>productlist - list of types -&gt; amount</li>
<li>recordlist - existing record datums</li>
</ul><h3 id="proc/restock"><aside class="declaration">proc </aside>restock<aside>(/<a href="obj.html">obj</a>/item/vending_refill/canister) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L303">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 303"/></a></aside>
        </h3>
        <p>Refill a vending machine from a refill canister</p>
<p>This takes the products from the refill canister and then fills the products,contraband and premium product categories</p>
<p>Arguments:</p>
<ul>
<li>canister - the vending canister we are refilling from</li>
</ul><h3 id="proc/shock"><aside class="declaration">proc </aside>shock<aside>(/<a href="mob.html">mob</a>/user, prb) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L740">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 740"/></a></aside>
        </h3>
        <p>Shock the passed in user</p>
<p>This checks we have power and that the passed in prob is passed, then generates some sparks
and calls electrocute_mob on the user</p>
<p>Arguments:</p>
<ul>
<li>user - the user to shock</li>
<li>prb - probability the shock happens</li>
</ul><h3 id="proc/speak"><aside class="declaration">proc </aside>speak<aside>(message) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L669">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 669"/></a></aside>
        </h3>
        <p>Speak the given message verbally</p>
<p>Checks if the machine is powered and the message exists</p>
<p>Arguments:</p>
<ul>
<li>message - the message to speak</li>
</ul><h3 id="proc/throw_item"><aside class="declaration">proc </aside>throw_item<aside>() 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L696">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 696"/></a></aside>
        </h3>
        <p>Throw an item from our internal inventory out in front of us</p>
<p>This is called when we are hacked, it selects a random product from the records that has an amount &gt; 0
This item is then created and tossed out in front of us with a visible message</p><h3 id="proc/unbuild_inventory"><aside class="declaration">proc </aside>unbuild_inventory<aside>(/list/recordlist) 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L350">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 350"/></a></aside>
        </h3>
        <p>Given a record list, go through and and return a list of type -&gt; amount</p><h3 id="proc/update_canister"><aside class="declaration">proc </aside>update_canister<aside>() 
        
    
            <a href="https://github.com/Trotskystation/Trotskystation/blob/4decde6dbffaeb6c20545dee414e249d81bce398/code/modules/vending/_vending.dm#L335">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;vending&#x2F;_vending.dm 335"/></a></aside>
        </h3>
        <p>Set up a refill canister that matches this machines products</p>
<p>This is used when the machine is deconstructed, so the items aren't &quot;lost&quot;</p></main>
<footer>
    yogstation.dme
    <a href="https://github.com/Trotskystation/Trotskystation/tree/4decde6dbffaeb6c20545dee414e249d81bce398">4decde6</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.2.1</a></footer>
</body>
</html>
